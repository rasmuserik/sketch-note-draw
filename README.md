# sketch-note-draw 0.0.0

Simple sketching program, with clean interface

# Design

User interface:

- info
  - tap + move = draw
  - tap + hold = menu
  - 2 fingers = pan/zoom
  - solsort.com
- menu
  - clear
  - save
  - load
  - png
  - scroll 
  - zoom
  - on screen menu
  - login
- load
  - thumbnails with date + `next`

Implementation:
- saved drawing
  - thumbnail 80x80
  - most-recent-edit-time
  - list of strokes
    - `size`
    - `(time, x, y)*`
- visualisation
  - 3x canvas (2xscreensize): zoom, outer, rerender
  - transformation matrix
  - current strokes

# Boilerplate
predicates that can be optimised away by uglifyjs

    if typeof isNodeJs == "undefined" or typeof runTest == "undefined" then do ->
      root = if typeof window == "undefined" then global else window
      root.isNodeJs = (typeof process != "undefined") if typeof isNodeJs == "undefined"
      root.isWindow = (typeof window != "undefined") if typeof isWindow == "undefined"
      root.isPhoneGap = typeof document?.ondeviceready != "undefined" if typeof isPhoneGap == "undefined"
      root.runTest = (if isNodeJs then process.argv[2] == "test" else location.hash.slice(1) == "test") if typeof runTest == "undefined"
    

use - require/window.global with non-require name to avoid being processed in firefox plugins

    use = if isNodeJs then ((module) -> require module) else ((module) -> window[module]) 

execute main

    onReady = (fn) ->
      if isWindow
        if document.readystate != "complete" then fn() else setTimeout (-> onReady fn), 17 

# Actual code

    
    t = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    info = (args...) ->
      t.shift()
      t.push args
      log.innerHTML = JSON.stringify t
    
    stroke = []
    transform = false
    hold = false
    
    rootX = 0
    rootY = 0
    scale = 1
    
    ctx = undefined
    
    drawSegment = (x0, y0, x1, y1) ->
      ctx.beginPath()
      ctx.moveTo x0, y0
      ctx.lineTo x1, y1
      ctx.stroke()
    
    onReady ->
      ctx = canvas.getContext "2d"
      events = Hammer(window)
      events.on "drag", (e)->
        x = (e.gesture.touches[0].clientX - rootX) * scale
        y = (e.gesture.touches[0].clientY - rootY) * scale
        if stroke.length
          drawSegment stroke[stroke.length - 2], stroke[stroke.length - 1], x, y
        stroke.push x, y
    
      events.on "dragstart", ->
        stroke = []
        transform = false
        hold = false
    
      events.on "transformstart transformend", ->
        transform = true
    
      events.on "hold tap", (e) ->
        console.log e
        hold = true
        menu()
    
      events.on "dragend", ->
        if !transform and !hold
          strokes.push
            scale: scale
            strokes: strokes
        else
          redraw()
    

----

README.md autogenerated from `sketch-note-draw.coffee` ![solsort](https://ssl.solsort.com/_reputil_rasmuserik_sketch-note-draw.png)
